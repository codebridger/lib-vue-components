---
description: "Lib Vue Components Development Guidelines (for AI Agent)"
globs: ["src/**/*.vue", "src/**/*.ts", "src/**/*.tsx", "src/**/*.stories.ts"]
alwaysApply: true
---

## Preamble

This rule set guides the AI agent in adhering to the development standards for the Lib Vue Components library - a comprehensive Vue 3 + TypeScript + Tailwind CSS component library. The primary goal is to ensure consistency, maintainability, and alignment with the library's core principles of modularity, theming, internationalization, and accessibility.

## Core Principles

- **Component-Driven Architecture**: All components must follow the established modular structure with clear separation between elements, complex components, and shell components.
- **TypeScript-First Development**: All components and utilities must be built with strict TypeScript typing and interfaces.
- **Tailwind CSS Integration**: Utilize Tailwind CSS for all styling with the established color system and utility classes.
- **Storybook Documentation**: Every component must be thoroughly documented in Storybook with comprehensive examples and prop controls.
- **Accessibility (A11y) Compliant**: Components must be built with accessibility in mind, ensuring usability for all users.
- **Internationalization (i18n) Ready**: All text content must support multiple languages through the established locale system.
- **Theme System Integration**: Components must seamlessly integrate with the light/dark/semidark theme system.

## Project Architecture Understanding

### Component Categories

- **Elements** (`src/elements/`): Basic UI components (Button, Input, Card, etc.)
- **Complex** (`src/complex/`): Advanced components (Modal, Pagination, etc.)
- **Shell** (`src/shell/`): Layout and structural components (AppRoot, DashboardShell, etc.)
- **Icon** (`src/icon/`): Icon system with menu and single icon variants

### State Management

- **Pinia Store** (`src/stores/index.ts`): Centralized state for theme, layout, RTL, and app settings
- **Theme Classes**: `light`, `dark` on body element; `ltr`, `rtl` on html element
- **Semidark Mode**: Special theme variant for sidebar and header components

---

## Categorized Rules

### 1. Component Development & Structure

- **Vue 3 Composition API**: All components must use `<script setup lang="ts">` syntax with TypeScript.
- **Component Naming**: Use PascalCase for component files and registration (e.g., `Button.vue`, `DashboardShell.vue`).
- **Props Interface**: Define explicit TypeScript interfaces for all component props with proper typing.
- **Component Registration**: Export all components through their respective `components.ts` files:
  - `src/elements/components.ts` for elements
  - `src/complex/components.ts` for complex components
  - `src/shell/components.ts` for shell components
- **Slot System**: Utilize named slots for flexible component composition (e.g., `sidebar-menu`, `header`, `content` slots in DashboardShell).

### 2. Styling & Theming

- **Tailwind CSS**: Use the established Tailwind configuration with custom color palette:
  - Primary: `#4361ee` (blue)
  - Secondary: `#805dca` (purple)
  - Success: `#00ab55` (green)
  - Danger: `#e7515a` (red)
  - Warning: `#e2a03f` (orange)
  - Info: `#2196f3` (light blue)
  - Dark: `#3b3f5c` (dark gray)
- **RTL Support**:
  - Use logical properties: `ltr:mr-2 rtl:ml-2` instead of `margin-left/right`
  - Check `store.isRtl` computed property for conditional styling
  - Apply `ltr:` and `rtl:` prefixes for directional classes
- **Theme Support**:
  - Check `store.isDarkMode` for dark theme detection
  - Use `dark:` prefix for dark theme variants
  - Support semidark mode with `store.semidark` for sidebar/header
- **Responsive Design**: Implement responsive classes (`sm:`, `md:`, `lg:`, `xl:`) for all components.
- **Animation Classes**: Use established animation patterns:
  - `transition-all duration-300` for smooth transitions
  - `animate-pulse` for loading states
  - `animate-[spin_2s_linear_infinite]` for custom animations

### 3. TypeScript & Type Safety

- **Interface Definitions**: Create explicit interfaces for all props, emits, and component data.
- **Type Exports**: Export types through `src/types/types.ts` for reusability.
- **Generic Types**: Use generic types for flexible components (e.g., dropdown items, table data).
- **Strict Typing**: Avoid `any` types; use proper TypeScript types or `unknown` when necessary.

### 4. Storybook Integration

- **Story Structure**: Create comprehensive stories for every component with:
  - Default story with basic props
  - Variant stories for different prop combinations
  - Interactive stories with controls
  - Code examples using `type: 'code'` in docs
- **ArgTypes**: Define proper argTypes for all props with appropriate controls:
  - `select` for enum values
  - `boolean` for boolean props
  - `text` for string props
  - `inline-radio` for mutually exclusive options
- **Documentation**: Include usage guidelines, prop descriptions, and examples in Storybook docs.

### 5. Icon System

- **Icon Usage**: Use the established icon system with `<Icon name="icon-name" />` component.
- **Icon Categories**: Follow the established structure:
  - Menu icons: `src/icon/menu/`
  - Single icons: `src/icon/single/`
  - Variant icons: `src/icon/variant/`
- **Icon Props**: Support `name`, `class`, and other standard icon properties.

### 6. Internationalization (i18n)

- **Locale Files**: Add all user-facing strings to `src/locales/en.json` and other language files.
- **Translation Keys**: Use descriptive keys following the established naming convention (e.g., `dashboard`, `user_interface`).
- **Dynamic Content**: Use i18n functions for dynamic content instead of string concatenation.

### 7. State Management Integration

- **Store Usage**: Use `useAppStore()` for accessing global state:
  - `store.toggleTheme()` for theme switching
  - `store.toggleRTL()` for RTL switching
  - `store.toggleSidebar()` for sidebar control
  - `store.semidark` for semidark mode
- **Reactive State**: Use `computed` properties for derived state based on store values.

### 8. Component Patterns

- **Slot Composition**: Design components to be composable using named slots:
  ```vue
  <DashboardShell>
    <template #sidebar-menu>
      </template>
    <template #header>
      </template>
    <template #content>
      </template>
  </DashboardShell>
  ```
- **Prop Validation**: Use TypeScript interfaces for prop validation instead of runtime validation.
- **Event Handling**: Define explicit emit types for all component events.
- **Loading States**: Implement loading states with proper visual feedback (spinners, skeletons).

### 9. File Organization

- **Component Files**: Place components in their appropriate category folders:
  - `src/elements/` for basic UI components
  - `src/complex/` for advanced components
  - `src/shell/` for layout components
- **Story Files**: Co-locate `.stories.ts` files with their corresponding components.
- **Type Files**: Export types through `src/types/` directory.
- **Asset Organization**: Follow the established structure for images, icons, and other assets.

### 10. Build & Export Configuration

- **Package Exports**: Follow the established export pattern in `package.json`:
  - `./elements.ts` for element components
  - `./complex.ts` for complex components
  - `./shell.ts` for shell components
  - `./toast.ts` for utilities
  - `./store.ts` for state management
- **Type Declarations**: Ensure proper TypeScript declarations are exported.
- **CSS Exports**: Export styles through `./style.css` for external usage.

---

## AI Agent Behavior

- **Component Analysis**: When working with components, analyze their category and follow the appropriate patterns.
- **Store Integration**: Always check if components need to integrate with the Pinia store for theme/RTL support.
- **Storybook Creation**: Automatically suggest Storybook stories for new components with proper argTypes and examples.
- **Type Safety**: Ensure all code changes maintain strict TypeScript typing.
- **Theme Compliance**: Verify that all styling changes support the established theme system.
- **RTL Support**: Check that directional styling uses logical properties and RTL classes.
- **Documentation**: Prompt for comprehensive documentation updates when adding new features or components.
- **Code Examples**: Provide complete, runnable code examples for all component usage patterns.
