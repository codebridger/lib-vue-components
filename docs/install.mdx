import { Meta } from "@storybook/blocks";

<Meta title="Getting Started/Installation" />

# Installation Guide

## Prerequisites

- A working Vue 3 or Nuxt 3 project
- GitHub account with package access
- Node.js and npm/yarn installed

## Setup Steps

### 1. GitHub Authentication

1. Create a GitHub personal access token:
   - Go to GitHub Settings → Developer Settings → Personal Access Tokens
   - Generate a new token with `read:packages` permission
   - Copy the generated token
   - For detailed instructions, watch [this guide](https://www.youtube.com/watch?v=iLrywUfs7yU)

2. Create an `.npmrc` file in your project root:
   ```bash
   @codebridger:registry=https://npm.pkg.github.com
   //npm.pkg.github.com/:_authToken=YOUR_GITHUB_TOKEN
   ```
   Replace `YOUR_GITHUB_TOKEN` with the token you created.

### 2. Package Installation

Install the package using npm or yarn:

```bash
# Using npm
npm install @codebridger/lib-vue-components

# Using yarn
yarn add @codebridger/lib-vue-components

# install from dev branch
yarn add @codebridger/lib-vue-components@dev
```

### 3. Integration

#### Vue 3 Setup

```javascript
// Import components and Styles
import vueComponents from "@codebridger/lib-vue-components";
import '@codebridger/lib-vue-components/style.css';

// Configuration options
const options = {
  // Component prefix (default: "CL")
  prefix: "CL",
  
  // Optional: Disable specific integrations
  dontInstallPinia: true,
  dontInstallPopper: false,
  dontInstallPerfectScrollbar: false,
};

// Install on Vue app
vueApp.use(vueComponents, options);
```

#### Nuxt 3 Setup

1. Create a plugin file `plugins/component-library.client.ts`:

```javascript
import { defineNuxtPlugin as init } from '@codebridger/lib-vue-components/nuxt';

export default defineNuxtPlugin({
  name: '@codebridger/lib-vue-components',
  enforce: 'pre',
  async setup(nuxtApp) {
    const options = {
      prefix: "CL",
      dontInstallPinia: true,
      dontInstallPopper: false,
      dontInstallPerfectScrollbar: false,
    };

    return init(nuxtApp, options);
  },
});
```

2. Update your `nuxt.config.ts`:

```javascript
export default defineNuxtConfig({
  // Ensure components are transpiled during build
  build: {
    transpile: ['@codebridger/lib-vue-components'],
  },

  css: [
    // ... other CSS files
    '@codebridger/lib-vue-components/style.css',
  ],
  
  // ... other Nuxt config
});
```

## Configuration Options

```typescript
interface ConfigOptions {
  // Prefix for component names (default: "CL")
  prefix?: string;
  
  // Disable Pinia store integration (default: false)
  dontInstallPinia?: boolean;
  
  // Disable Popper.js integration (default: false)
  dontInstallPopper?: boolean;
  
  // Disable Perfect Scrollbar integration (default: false)
  dontInstallPerfectScrollbar?: boolean;
}
```

## Next Steps

After installation, you can start using the components in your application. Check out our component documentation for detailed usage instructions and examples.