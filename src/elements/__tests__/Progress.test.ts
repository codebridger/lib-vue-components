import { describe, it, expect } from "vitest"; import { mount } from "@vue/test-utils"; import Progress from "../Progress.vue"; describe("Progress Component", () => { const createWrapper = (props = {}) => { return mount(Progress, { props }); }; describe("Rendering", () => { it("renders as div element by default", () => { const wrapper = createWrapper(); expect(wrapper.find("div").exists()).toBe(true); }); it("renders with default classes", () => { const wrapper = createWrapper(); expect(wrapper.classes()).toContain("w-full"); expect(wrapper.classes()).toContain("bg-gray-200"); expect(wrapper.classes()).toContain("relative"); expect(wrapper.classes()).toContain("overflow-hidden"); }); it("renders with custom class", () => { const wrapper = createWrapper({ classes: { wrapper: "custom-progress" } }); expect(wrapper.classes()).toContain("custom-progress"); }); }); describe("Props and Styling", () => { it("applies size classes correctly", () => { const sizes = ["default", "sm", "md", "lg", "xl"]; sizes.forEach(size => { const wrapper = createWrapper({ size }); const sizeClasses = { default: "h-4", sm: "h-1", md: "h-2.5", lg: "h-5", xl: "h-6" }; expect(wrapper.classes()).toContain(sizeClasses[size]); }); }); it("applies color classes correctly", () => { const colors = ["primary", "info", "success", "warning", "danger", "secondary", "dark", "gradient"]; colors.forEach(color => { const wrapper = createWrapper({ color }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.exists()).toBe(true); }); }); it("applies rounded class when rounded is true", () => { const wrapper = createWrapper({ rounded: true }); expect(wrapper.classes()).toContain("rounded-full"); }); it("does not apply rounded class when rounded is false", () => { const wrapper = createWrapper({ rounded: false }); expect(wrapper.classes()).not.toContain("rounded-full"); }); }); describe("Progress Bar Rendering", () => { it("renders progress bar with correct width", () => { const wrapper = createWrapper({ value: 50, max: 100 }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.exists()).toBe(true); expect(progressBar.attributes("style")).toContain("width: 50%"); }); it("renders progress bar with custom max value", () => { const wrapper = createWrapper({ value: 25, max: 50 }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.attributes("style")).toContain("width: 50%"); }); it("clamps value to 0-100 range", () => { const wrapper = createWrapper({ value: 150, max: 100 }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.attributes("style")).toContain("width: 100%"); }); it("handles zero max value", () => { const wrapper = createWrapper({ value: 50, max: 0 }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.attributes("style")).toContain("width: 0%"); }); }); describe("Label Rendering", () => { it("renders label when showLabel is true", () => { const wrapper = createWrapper({ showLabel: true, value: 50 }); const label = wrapper.find("span"); expect(label.exists()).toBe(true); expect(label.text()).toContain("50%"); }); it("renders custom label when provided", () => { const wrapper = createWrapper({ showLabel: true, label: "Custom Label" }); const label = wrapper.find("span"); expect(label.text()).toContain("Custom Label"); }); it("does not render label when showLabel is false", () => { const wrapper = createWrapper({ showLabel: false }); const label = wrapper.find("span"); expect(label.exists()).toBe(false); }); }); describe("Animation and Effects", () => { it("applies striped class when striped is true", () => { const wrapper = createWrapper({ striped: true }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.classes()).toContain("striped-bar"); }); it("applies animated class when animated is true", () => { const wrapper = createWrapper({ animated: true }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.classes()).toContain("animated-progress"); }); }); describe("Accessibility", () => { it("has correct ARIA attributes", () => { const wrapper = createWrapper({ value: 50, max: 100 }); expect(wrapper.attributes("role")).toBe("progressbar"); expect(wrapper.attributes("aria-valuenow")).toBe("50"); expect(wrapper.attributes("aria-valuemin")).toBe("0"); expect(wrapper.attributes("aria-valuemax")).toBe("100"); }); it("updates ARIA attributes when value changes", () => { const wrapper = createWrapper({ value: 75, max: 100 }); expect(wrapper.attributes("aria-valuenow")).toBe("75"); }); }); describe("Edge Cases", () => { it("handles negative values", () => { const wrapper = createWrapper({ value: -10, max: 100 }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.attributes("style")).toContain("width: 0%"); }); it("handles undefined props gracefully", () => { const wrapper = createWrapper({}); expect(wrapper.exists()).toBe(true); expect(wrapper.classes()).toContain("w-full"); }); }); });
