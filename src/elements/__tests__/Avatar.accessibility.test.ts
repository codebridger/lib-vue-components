import { describe, it, expect } from "vitest"; import { mount } from "@vue/test-utils"; import Avatar from "../Avatar.vue"; describe("Avatar Component Accessibility", () => { const createWrapper = (props = {}) => { return mount(Avatar, { props, global: { provide: { hoverAnimation: false } } }); }; describe("ARIA Attributes", () => { it("supports custom aria-label", () => { const wrapper = createWrapper({ src: "test-image.jpg", "aria-label": "User avatar" }); expect(wrapper.attributes("aria-label")).toBe("User avatar"); }); it("supports aria-describedby", () => { const wrapper = createWrapper({ src: "test-image.jpg", "aria-describedby": "avatar-description" }); expect(wrapper.attributes("aria-describedby")).toBe("avatar-description"); }); it("supports role attribute", () => { const wrapper = createWrapper({ src: "test-image.jpg", role: "img" }); expect(wrapper.attributes("role")).toBe("img"); }); }); describe("Image Accessibility", () => { it("has alt text for images", () => { const wrapper = createWrapper({ src: "test-image.jpg", alt: "User profile picture" }); const img = wrapper.find("img"); expect(img.attributes("alt")).toBe("User profile picture"); }); it("uses default alt text when not provided", () => { const wrapper = createWrapper({ src: "test-image.jpg" }); const img = wrapper.find("img"); expect(img.attributes("alt")).toBe("User avatar"); }); }); describe("Keyboard Navigation", () => { it("supports tabindex", () => { const wrapper = createWrapper({ src: "test-image.jpg", tabindex: "0" }); expect(wrapper.attributes("tabindex")).toBe("0"); }); it("can be removed from tab order", () => { const wrapper = createWrapper({ src: "test-image.jpg", tabindex: "-1" }); expect(wrapper.attributes("tabindex")).toBe("-1"); }); }); describe("Focus Management", () => { it("supports focus event handling", async () => { const wrapper = createWrapper({ src: "test-image.jpg", tabindex: "0" }); await wrapper.trigger("focus"); expect(wrapper.emitted("focus")).toBeTruthy(); }); it("supports blur event handling", async () => { const wrapper = createWrapper({ src: "test-image.jpg", tabindex: "0" }); await wrapper.trigger("blur"); expect(wrapper.emitted("blur")).toBeTruthy(); }); }); describe("Screen Reader Support", () => { it("provides meaningful alt text for screen readers", () => { const wrapper = createWrapper({ src: "test-image.jpg", alt: "Profile picture of John Doe" }); const img = wrapper.find("img"); expect(img.attributes("alt")).toBe("Profile picture of John Doe"); }); it("supports aria-label for additional context", () => { const wrapper = createWrapper({ src: "test-image.jpg", alt: "John Doe", "aria-label": "Profile picture of John Doe, team lead" }); expect(wrapper.attributes("aria-label")).toBe("Profile picture of John Doe, team lead"); }); }); describe("Status Indicator Accessibility", () => { it("provides status context when status indicator is shown", () => { const wrapper = createWrapper({ src: "test-image.jpg", showStatus: true, status: "online", "aria-label": "John Doe - Online" }); expect(wrapper.attributes("aria-label")).toBe("John Doe - Online"); }); }); });
