import { describe, it, expect } from "vitest"; import { mount } from "@vue/test-utils"; import IconButton from "../IconButton.vue"; describe("IconButton Component Accessibility", () => { const createWrapper = (props = {}) => { return mount(IconButton, { props }); }; describe("ARIA Attributes", () => { it("supports custom aria-label", () => { const wrapper = createWrapper({ "aria-label": "Settings button" }); expect(wrapper.attributes("aria-label")).toBe("Settings button"); }); it("supports aria-describedby", () => { const wrapper = createWrapper({ "aria-describedby": "button-description" }); expect(wrapper.attributes("aria-describedby")).toBe("button-description"); }); it("supports role attribute", () => { const wrapper = createWrapper({ role: "button" }); expect(wrapper.attributes("role")).toBe("button"); }); }); describe("Disabled State Accessibility", () => { it("indicates disabled state to screen readers", () => { const wrapper = createWrapper({ disabled: true, "aria-disabled": "true" }); expect(wrapper.attributes("aria-disabled")).toBe("true"); }); it("applies disabled styling for visual indication", () => { const wrapper = createWrapper({ disabled: true }); expect(wrapper.classes()).toContain("cursor-not-allowed"); expect(wrapper.classes()).toContain("bg-gray-100"); }); }); describe("Loading State Accessibility", () => { it("indicates loading state to screen readers", () => { const wrapper = createWrapper({ isLoading: true, "aria-busy": "true" }); expect(wrapper.attributes("aria-busy")).toBe("true"); }); it("applies loading styling for visual indication", () => { const wrapper = createWrapper({ isLoading: true }); expect(wrapper.classes()).toContain("cursor-not-allowed"); expect(wrapper.classes()).toContain("bg-gray-100"); }); }); describe("Keyboard Navigation", () => { it("supports tabindex", () => { const wrapper = createWrapper({ tabindex: "0" }); expect(wrapper.attributes("tabindex")).toBe("0"); }); it("can be removed from tab order", () => { const wrapper = createWrapper({ tabindex: "-1" }); expect(wrapper.attributes("tabindex")).toBe("-1"); }); }); describe("Focus Management", () => { it("supports focus event handling", async () => { const wrapper = createWrapper({ tabindex: "0" }); await wrapper.trigger("focus"); expect(wrapper.emitted("focus")).toBeTruthy(); }); it("supports blur event handling", async () => { const wrapper = createWrapper({ tabindex: "0" }); await wrapper.trigger("blur"); expect(wrapper.emitted("blur")).toBeTruthy(); }); }); describe("Screen Reader Support", () => { it("provides meaningful context for screen readers", () => { const wrapper = createWrapper({ "aria-label": "Delete user profile", icon: "IconTrash" }); expect(wrapper.attributes("aria-label")).toBe("Delete user profile"); }); it("announces disabled state", () => { const wrapper = createWrapper({ disabled: true, "aria-label": "Disabled settings button" }); expect(wrapper.attributes("aria-label")).toBe("Disabled settings button"); expect(wrapper.classes()).toContain("cursor-not-allowed"); }); it("announces loading state", () => { const wrapper = createWrapper({ isLoading: true, "aria-label": "Loading settings" }); expect(wrapper.attributes("aria-label")).toBe("Loading settings"); expect(wrapper.classes()).toContain("cursor-not-allowed"); }); }); describe("Icon Accessibility", () => { it("provides icon context for screen readers", () => { const wrapper = createWrapper({ icon: "IconSettings", "aria-label": "Settings" }); expect(wrapper.exists()).toBe(true); }); it("provides image alt text when using image", () => { const wrapper = createWrapper({ imgUrl: "avatar.jpg", "aria-label": "User avatar" }); const img = wrapper.find("img"); expect(img.exists()).toBe(true); expect(img.attributes("src")).toBe("avatar.jpg"); }); }); });
