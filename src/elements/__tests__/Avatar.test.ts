import { describe, it, expect } from "vitest"; import { mount } from "@vue/test-utils"; import Avatar from "../Avatar.vue"; describe("Avatar Component", () => { const createWrapper = (props = {}) => { return mount(Avatar, { props, global: { provide: { hoverAnimation: false } } }); }; describe("Rendering", () => { it("renders as div element by default", () => { const wrapper = createWrapper({ src: "test-image.jpg" }); expect(wrapper.find("div").exists()).toBe(true); }); it("renders with default classes", () => { const wrapper = createWrapper({ src: "test-image.jpg" }); expect(wrapper.classes()).toContain("overflow-hidden"); expect(wrapper.classes()).toContain("relative"); expect(wrapper.classes()).toContain("flex"); }); }); describe("Props and Styling", () => { it("applies size classes correctly", () => { const sizes = ["xs", "sm", "md", "lg"]; sizes.forEach(size => { const wrapper = createWrapper({ src: "test-image.jpg", size }); const sizeClasses = { xs: "w-12 h-12", sm: "w-14 h-14", md: "w-16 h-16", lg: "h-20 w-20" }; expect(wrapper.classes()).toContain(sizeClasses[size].split(" ")[0]); expect(wrapper.classes()).toContain(sizeClasses[size].split(" ")[1]); }); }); it("applies rounded classes correctly", () => { const roundeds = ["none", "xs", "sm", "md", "lg", "xl", "full"]; roundeds.forEach(rounded => { const wrapper = createWrapper({ src: "test-image.jpg", rounded }); const roundedClasses = { none: "rounded-none", xs: "rounded-xs", sm: "rounded-sm", md: "rounded-md", lg: "rounded-lg", xl: "rounded-xl", full: "rounded-full" }; const img = wrapper.find("img"); expect(img.classes()).toContain(roundedClasses[rounded]); }); }); it("applies disabled styling when disabled is true", () => { const wrapper = createWrapper({ src: "test-image.jpg", disabled: true }); const img = wrapper.find("img"); expect(img.classes()).toContain("opacity-50"); }); }); describe("Image Rendering", () => { it("renders image when src is provided", () => { const wrapper = createWrapper({ src: "test-image.jpg" }); const img = wrapper.find("img"); expect(img.exists()).toBe(true); expect(img.attributes("src")).toBe("test-image.jpg"); }); it("renders image with alt text", () => { const wrapper = createWrapper({ src: "test-image.jpg", alt: "User avatar" }); const img = wrapper.find("img"); expect(img.attributes("alt")).toBe("User avatar"); }); it("uses default alt text when alt is not provided", () => { const wrapper = createWrapper({ src: "test-image.jpg" }); const img = wrapper.find("img"); expect(img.attributes("alt")).toBe("User avatar"); }); }); describe("Status Indicator", () => { it("renders status indicator when showStatus is true", () => { const wrapper = createWrapper({ src: "test-image.jpg", showStatus: true }); const status = wrapper.find("span"); expect(status.exists()).toBe(true); expect(status.classes()).toContain("absolute"); expect(status.classes()).toContain("rounded-full"); }); it("does not render status indicator when showStatus is false", () => { const wrapper = createWrapper({ src: "test-image.jpg", showStatus: false }); const status = wrapper.find("span"); expect(status.exists()).toBe(false); }); it("applies different status color classes", () => { const statuses = ["online", "offline", "away", "busy"]; statuses.forEach(status => { const wrapper = createWrapper({ src: "test-image.jpg", showStatus: true, status }); const statusElement = wrapper.find("span"); const statusColorMap = { online: "bg-success", offline: "bg-secondary", away: "bg-warning", busy: "bg-danger" }; expect(statusElement.classes()).toContain(statusColorMap[status]); }); }); }); describe("Hover Animation", () => { it("applies hover animation when hoverAnimation is true", () => { const wrapper = mount(Avatar, { props: { src: "test-image.jpg" }, global: { provide: { hoverAnimation: true } } }); expect(wrapper.classes()).toContain("transition-all"); expect(wrapper.classes()).toContain("duration-300"); expect(wrapper.classes()).toContain("hover:translate-x-2"); }); it("does not apply hover animation when hoverAnimation is false", () => { const wrapper = createWrapper({ src: "test-image.jpg" }); expect(wrapper.classes()).not.toContain("hover:translate-x-2"); }); }); describe("Accessibility", () => { it("supports aria-label", () => { const wrapper = createWrapper({ src: "test-image.jpg", "aria-label": "User avatar" }); expect(wrapper.attributes("aria-label")).toBe("User avatar"); }); it("supports role attribute", () => { const wrapper = createWrapper({ src: "test-image.jpg", role: "img" }); expect(wrapper.attributes("role")).toBe("img"); }); it("supports tabindex", () => { const wrapper = createWrapper({ src: "test-image.jpg", tabindex: "0" }); expect(wrapper.attributes("tabindex")).toBe("0"); }); }); });
