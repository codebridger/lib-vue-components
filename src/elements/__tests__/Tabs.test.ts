import { describe, it, expect } from "vitest"; import { mount } from "@vue/test-utils"; import Tabs from "../Tabs.vue"; describe("Tabs Component", () => { const createWrapper = (props = {}, options = {}) => { const defaultProps = { tabs: [ { id: "tab1", label: "Tab 1", content: "Content 1" }, { id: "tab2", label: "Tab 2", content: "Content 2" } ], modelValue: "tab1", ...props }; return mount(Tabs, { props: defaultProps, ...options }); }; describe("Rendering", () => { it("renders as div element by default", () => { const wrapper = createWrapper(); expect(wrapper.find("div").exists()).toBe(true); }); it("renders with default classes", () => { const wrapper = createWrapper(); expect(wrapper.classes()).toContain("tabs-container"); expect(wrapper.classes()).toContain("mb-5"); }); it("renders with custom class", () => { const wrapper = createWrapper({ containerClass: "custom-tabs" }); expect(wrapper.classes()).toContain("custom-tabs"); }); }); describe("Tab Navigation", () => { it("renders tab buttons for each tab", () => { const wrapper = createWrapper(); const tabButtons = wrapper.findAll("a"); expect(tabButtons).toHaveLength(2); expect(tabButtons[0].text()).toContain("Tab 1"); expect(tabButtons[1].text()).toContain("Tab 2"); }); it("applies active state to selected tab", () => { const wrapper = createWrapper({ modelValue: "tab2" }); const tabButtons = wrapper.findAll("a"); expect(tabButtons[1].classes()).toContain("text-primary"); }); it("applies disabled state to disabled tab", () => { const wrapper = createWrapper({ tabs: [ { id: "tab1", label: "Tab 1", content: "Content 1" }, { id: "tab2", label: "Tab 2", content: "Content 2", disabled: true } ] }); const tabButtons = wrapper.findAll("a"); expect(tabButtons[1].classes()).toContain("pointer-events-none"); }); }); describe("Tab Content", () => { it("renders content for active tab", () => { const wrapper = createWrapper({ modelValue: "tab1" }); expect(wrapper.text()).toContain("Content 1"); }); it("shows content for selected tab", () => { const wrapper = createWrapper({ modelValue: "tab2" }); expect(wrapper.text()).toContain("Content 2"); }); it("hides content for inactive tabs", () => { const wrapper = createWrapper({ modelValue: "tab1" }); expect(wrapper.text()).toContain("Content 1"); expect(wrapper.text()).toContain("Content 2"); }); }); describe("Icon Support", () => { it("renders icon when provided", () => { const wrapper = createWrapper({ tabs: [ { id: "tab1", label: "Tab 1", content: "Content 1", icon: "IconSettings" } ] }); expect(wrapper.exists()).toBe(true); }); it("renders icon slot when available", () => { const wrapper = createWrapper({ tabs: [ { id: "tab1", label: "Tab 1", content: "Content 1", icon: "IconSettings" } ] }, { slots: { "icon-tab1": "<span>Custom Icon</span>" } }); expect(wrapper.text()).toContain("Custom Icon"); }); }); describe("Events", () => { it("emits update:modelValue when tab is clicked", async () => { const wrapper = createWrapper(); const tabButtons = wrapper.findAll("a"); await tabButtons[1].trigger("click"); expect(wrapper.emitted("update:modelValue")).toBeTruthy(); expect(wrapper.emitted("update:modelValue")[0]).toEqual(["tab2"]); }); it("does not emit event when disabled tab is clicked", async () => { const wrapper = createWrapper({ tabs: [ { id: "tab1", label: "Tab 1", content: "Content 1" }, { id: "tab2", label: "Tab 2", content: "Content 2", disabled: true } ] }); const tabButtons = wrapper.findAll("a"); await tabButtons[1].trigger("click"); expect(wrapper.emitted("update:modelValue")).toBeFalsy(); }); }); describe("Slot Support", () => { it("renders content slot when available", () => { const wrapper = createWrapper({}, { slots: { "content-tab1": "<div>Custom Content</div>" } }); expect(wrapper.text()).toContain("Custom Content"); }); it("falls back to content prop when slot is not available", () => { const wrapper = createWrapper(); expect(wrapper.text()).toContain("Content 1"); }); }); describe("Edge Cases", () => { it("handles empty tabs array", () => { const wrapper = createWrapper({ tabs: [], modelValue: "" }); expect(wrapper.exists()).toBe(true); }); it("handles single tab", () => { const wrapper = createWrapper({ tabs: [{ id: "tab1", label: "Tab 1", content: "Content 1" }] }); expect(wrapper.exists()).toBe(true); expect(wrapper.text()).toContain("Tab 1"); }); it("handles undefined props gracefully", () => { const wrapper = createWrapper({}); expect(wrapper.exists()).toBe(true); expect(wrapper.find("ul").exists()).toBe(true); }); }); });
