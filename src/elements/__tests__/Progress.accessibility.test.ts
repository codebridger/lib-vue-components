import { describe, it, expect } from "vitest"; import { mount } from "@vue/test-utils"; import Progress from "../Progress.vue"; describe("Progress Component Accessibility", () => { const createWrapper = (props = {}) => { return mount(Progress, { props }); }; describe("ARIA Attributes", () => { it("has correct role attribute", () => { const wrapper = createWrapper(); expect(wrapper.attributes("role")).toBe("progressbar"); }); it("has correct aria-valuenow", () => { const wrapper = createWrapper({ value: 75 }); expect(wrapper.attributes("aria-valuenow")).toBe("75"); }); it("has correct aria-valuemin", () => { const wrapper = createWrapper(); expect(wrapper.attributes("aria-valuemin")).toBe("0"); }); it("has correct aria-valuemax", () => { const wrapper = createWrapper({ max: 200 }); expect(wrapper.attributes("aria-valuemax")).toBe("200"); }); it("updates aria-valuenow when value changes", () => { const wrapper = createWrapper({ value: 25 }); expect(wrapper.attributes("aria-valuenow")).toBe("25"); }); }); describe("Screen Reader Support", () => { it("provides meaningful progress information", () => { const wrapper = createWrapper({ value: 60, max: 100 }); expect(wrapper.attributes("aria-valuenow")).toBe("60"); expect(wrapper.attributes("aria-valuemax")).toBe("100"); }); it("announces progress percentage with label", () => { const wrapper = createWrapper({ value: 45, showLabel: true }); const label = wrapper.find("span"); expect(label.exists()).toBe(true); expect(label.text()).toContain("45%"); }); it("announces custom label text", () => { const wrapper = createWrapper({ showLabel: true, label: "Loading files..." }); const label = wrapper.find("span"); expect(label.text()).toContain("Loading files..."); }); }); describe("Keyboard Navigation", () => { it("supports tabindex", () => { const wrapper = createWrapper({ "tabindex": "0" }); expect(wrapper.attributes("tabindex")).toBe("0"); }); it("can be removed from tab order", () => { const wrapper = createWrapper({ "tabindex": "-1" }); expect(wrapper.attributes("tabindex")).toBe("-1"); }); }); describe("Focus Management", () => { it("supports focus event handling", async () => { const wrapper = createWrapper({ tabindex: "0" }); await wrapper.trigger("focus"); expect(wrapper.emitted("focus")).toBeTruthy(); }); it("supports blur event handling", async () => { const wrapper = createWrapper({ tabindex: "0" }); await wrapper.trigger("blur"); expect(wrapper.emitted("blur")).toBeTruthy(); }); }); describe("Visual Accessibility", () => { it("provides sufficient color contrast", () => { const wrapper = createWrapper({ color: "primary" }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.exists()).toBe(true); }); it("supports high contrast mode", () => { const wrapper = createWrapper({ color: "danger" }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.exists()).toBe(true); }); }); describe("Animation Accessibility", () => { it("provides animation context for screen readers", () => { const wrapper = createWrapper({ animated: true }); const progressBar = wrapper.find(".progress-bar"); expect(progressBar.classes()).toContain("animated-progress"); }); }); describe("Progress Context", () => { it("provides context for different progress states", () => { const wrapper = createWrapper({ value: 0, showLabel: true, label: "Starting..." }); const label = wrapper.find("span"); expect(label.text()).toContain("Starting..."); }); it("provides context for completion state", () => { const wrapper = createWrapper({ value: 100, showLabel: true, label: "Complete" }); const label = wrapper.find("span"); expect(label.text()).toContain("Complete"); }); }); });
