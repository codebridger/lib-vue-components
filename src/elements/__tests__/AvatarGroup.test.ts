import { describe, it, expect } from "vitest"; import { mount } from "@vue/test-utils"; import AvatarGroup from "../AvatarGroup.vue"; import Avatar from "../Avatar.vue"; describe("AvatarGroup Component", () => { const createWrapper = (props = {}, slots = {}) => { return mount(AvatarGroup, { props, slots, global: { components: { Avatar } } }); }; describe("Rendering", () => { it("renders as div element by default", () => { const wrapper = createWrapper(); expect(wrapper.find("div").exists()).toBe(true); }); it("renders with default classes", () => { const wrapper = createWrapper(); expect(wrapper.classes()).toContain("flex"); expect(wrapper.classes()).toContain("items-center"); expect(wrapper.classes()).toContain("justify-center"); expect(wrapper.classes()).toContain("-space-x-4"); }); it("renders with custom class", () => { const wrapper = createWrapper({ class: "custom-group" }); expect(wrapper.classes()).toContain("custom-group"); }); }); describe("Props and Styling", () => { it("applies hover animation when hoverAnimation is true", () => { const wrapper = createWrapper({ hoverAnimation: true }); expect(wrapper.classes()).toContain("-space-x-4"); }); it("does not apply hover animation when hoverAnimation is false", () => { const wrapper = createWrapper({ hoverAnimation: false }); expect(wrapper.classes()).toContain("-space-x-4"); }); }); describe("Avatar Rendering", () => { it("renders avatars from slots", () => { const wrapper = createWrapper({}, { default: "<Avatar src=\"avatar1.jpg\" alt=\"User 1\" /><Avatar src=\"avatar2.jpg\" alt=\"User 2\" />" }); const avatarComponents = wrapper.findAllComponents(Avatar); expect(avatarComponents).toHaveLength(2); }); it("provides hover animation context to child avatars", () => { const wrapper = createWrapper({ hoverAnimation: true }, { default: "<Avatar src=\"avatar1.jpg\" alt=\"User 1\" />" }); const avatarComponent = wrapper.findComponent(Avatar); expect(avatarComponent.exists()).toBe(true); }); }); describe("Accessibility", () => { it("has role group", () => { const wrapper = createWrapper(); expect(wrapper.attributes("role")).toBe("group"); }); it("has aria-label", () => { const wrapper = createWrapper(); expect(wrapper.attributes("aria-label")).toBe("Avatar group"); }); it("supports custom aria-label", () => { const wrapper = createWrapper({ "aria-label": "Team members" }); expect(wrapper.attributes("aria-label")).toBe("Team members"); }); it("supports role attribute", () => { const wrapper = createWrapper({ role: "group" }); expect(wrapper.attributes("role")).toBe("group"); }); }); describe("Edge Cases", () => { it("handles empty slots", () => { const wrapper = createWrapper(); expect(wrapper.exists()).toBe(true); expect(wrapper.classes()).toContain("flex"); }); it("handles undefined props gracefully", () => { const wrapper = createWrapper({}); expect(wrapper.exists()).toBe(true); expect(wrapper.classes()).toContain("flex"); }); }); });
